{
    "sourceFile": "src/components/EditVehicleModal.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1763039973501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763045254986,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,300 +1,287 @@\n-import React, { useEffect, useState } from \"react\";\n-import carColor from \"../assets/CarFill.svg\";\n-import carOutline from \"../assets/CarFade.svg\";\n-import bikeColor from \"../assets/BikeFill.svg\";\n-import bikeOutline from \"../assets/BikeFade.svg\";\n-import { updateUserVehicle } from \"../api/vehicleApi\";\n-\n-const Backdrop = ({ onClose }) => (\n-  <div\n-    className=\"fixed inset-0 bg-black/40 z-[9998]\"\n-    onClick={onClose}\n-    aria-hidden=\"true\"\n-  />\n-);\n-\n-const EditVehicleModal = ({ open, onClose, onSubmit, initial }) => {\n-  const [vehicleType, setVehicleType] = useState(\"car\");\n-  const [form, setForm] = useState({\n-    year: \"\",\n-    fuelType: \"\",\n-  });\n-  const [errors, setErrors] = useState({});\n-  const [touched, setTouched] = useState({});\n-  const [loading, setLoading] = useState(false);\n-  const [submitError, setSubmitError] = useState(\"\");\n-\n-  useEffect(() => {\n-    if (!open) return;\n-    document.body.style.overflow = \"hidden\";\n-    const onKey = (e) => e.key === \"Escape\" && onClose();\n-    window.addEventListener(\"keydown\", onKey);\n-    return () => {\n-      document.body.style.overflow = \"auto\";\n-      window.removeEventListener(\"keydown\", onKey);\n-    };\n-  }, [open, onClose]);\n-\n-  useEffect(() => {\n-    if (initial) {\n-      setVehicleType(initial.vehicleType || \"car\");\n-      setForm({\n-        vehicleNumber: initial.vehicleNumber || \"\",\n-        brand: initial.brand || \"\",\n-        model: initial.model || \"\",\n-        year: initial.year || \"\",\n-        fuelType: initial.fuelType || \"\",\n-      });\n-      setErrors({});\n-      setTouched({});\n-    }\n-  }, [initial]);\n-\n-  useEffect(() => {\n-    if (!open) {\n-      setForm({\n-        vehicleNumber: \"\",\n-        brand: \"\",\n-        model: \"\",\n-        year: \"\",\n-        fuelType: \"\",\n-      });\n-      setErrors({});\n-      setTouched({});\n-      setSubmitError(\"\");\n-      setVehicleType(\"car\");\n-    }\n-  }, [open]);\n-\n-  const validateField = (name, value) => {\n-    switch (name) {\n-      case \"vehicleNumber\": {\n-        const clean = value.replace(/\\s/g, \"\").toUpperCase();\n-        if (!clean) return \"Vehicle number is required\";\n-        const regex = /^[A-Z]{2}[0-9]{1,2}[A-Z]{0,4}[0-9]{3,4}$/;\n-        if (!regex.test(clean))\n-          return \"Please enter a valid number (e.g., DL01AB1234)\";\n-        if (clean.length < 8 || clean.length > 12)\n-          return \"Vehicle number should be 8–12 characters\";\n-        return \"\";\n-      }\n-      case \"brand\":\n-        if (!value.trim()) return \"Brand is required\";\n-        if (value.length < 2) return \"Brand must be at least 2 characters\";\n-        return \"\";\n-      case \"model\":\n-        if (!value.trim()) return \"Model is required\";\n-        return \"\";\n-      case \"year\": {\n-        if (!value.trim()) return \"Year is required\";\n-        const yearNum = +value;\n-        const curr = new Date().getFullYear();\n-        if (yearNum < 1900 || yearNum > curr + 1)\n-          return `Year must be between 1900 and ${curr + 1}`;\n-        return \"\";\n-      }\n-      case \"fuelType\": {\n-        if (!value.trim()) return \"Fuel type is required\";\n-        const valid = [\"petrol\", \"diesel\", \"electric\", \"cng\", \"hybrid\", \"lpg\"];\n-        if (!valid.includes(value.toLowerCase()))\n-          return \"Invalid fuel type (try Petrol, Diesel, Electric, etc.)\";\n-        return \"\";\n-      }\n-      default:\n-        return \"\";\n-    }\n-  };\n-\n-  const validateForm = () => {\n-    const newErrors = {};\n-    for (const key of Object.keys(form)) {\n-      newErrors[key] = validateField(key, form[key]);\n-    }\n-    setErrors(newErrors);\n-    return !Object.values(newErrors).some((err) => err);\n-  };\n-\n-  const handleChange = (e) => {\n-    const { name, value } = e.target;\n-    const newValue = name === \"vehicleNumber\" ? value.toUpperCase() : value;\n-    setForm((prev) => ({ ...prev, [name]: newValue }));\n-    if (touched[name]) {\n-      setErrors((prev) => ({\n-        ...prev,\n-        [name]: validateField(name, newValue),\n-      }));\n-    }\n-  };\n-\n-  const handleBlur = (e) => {\n-    const { name, value } = e.target;\n-    setTouched((prev) => ({ ...prev, [name]: true }));\n-    setErrors((prev) => ({\n-      ...prev,\n-      [name]: validateField(name, value),\n-    }));\n-  };\n-\n-  const handleSubmit = async (e) => {\n-    e.preventDefault();\n-    setSubmitError(\"\");\n-\n-    const allTouched = Object.keys(form).reduce(\n-      (acc, key) => ({ ...acc, [key]: true }),\n-      {}\n-    );\n-    setTouched(allTouched);\n-\n-    if (!validateForm()) {\n-      setSubmitError(\"Vehicle Data is invalid\");\n-      return;\n-    }\n-\n-    setLoading(true);\n-\n-    const payload = {\n-      vehicleNumber: form.vehicleNumber.replace(/\\s/g, \"\"),\n-      vehicleType,\n-      brandName: form.brand.trim(),\n-      modelName: form.model.trim(),\n-      fuelType: form.fuelType.trim().toUpperCase(),\n-      year: form.year,\n-    };\n-\n-    try {\n-      const res = await updateUserVehicle(initial._id, payload);\n-      if (res?.data?.success || res?.success) {\n-        alert(\"Vehicle updated successfully!\");\n-        onSubmit?.();\n-        onClose();\n-      } else {\n-        setSubmitError(res?.data?.message || \"Failed to update vehicle\");\n-      }\n-    } catch (err) {\n-      setSubmitError(\"An error occurred while updating the vehicle\");\n-    }\n-    setLoading(false);\n-  };\n-\n-  if (!open) return null;\n-\n-  return (\n-    <>\n-      <Backdrop onClose={onClose} />\n-      {/* modal container */}\n-      <div className=\"fixed inset-0 z-[9999] grid place-items-center p-3 sm:p-4\">\n-        <div className=\"w-full max-w-3xl rounded-2xl bg-white shadow-2xl border border-slate-200\">\n-          {/* header */}\n-          <div className=\"flex justify-between items-center bg-[#D9E7FE] rounded-t-2xl px-4 sm:px-6 py-3 sm:py-4 border-b\">\n-            <h2 className=\"font-semibold text-center flex-1 text-sm sm:text-base\">\n-              Edit Vehicle Details\n-            </h2>\n-            <button onClick={onClose} className=\"text-slate-600 text-lg\">\n-              ✕\n-            </button>\n-          </div>\n-\n-          {/* body */}\n-          <form onSubmit={handleSubmit} className=\"p-4 sm:p-6 space-y-3 text-sm\">\n-            {/* Vehicle type toggle */}\n-            <div className=\"flex justify-center gap-4\">\n-              {[\"car\", \"bike\"].map((type) => (\n-                <button\n-                  key={type}\n-                  type=\"button\"\n-                  onClick={() => setVehicleType(type)}\n-                  className={`relative flex flex-col items-center w-24 h-14 rounded-xl ${\n-                    vehicleType === type\n-                      ? \"border-[#266DDF] bg-[#ECF3FD]\"\n-                      : \"border border-transparent hover:bg-[#ECF3FD]\"\n-                  }`}\n-                >\n-                  <span\n-                    className={`absolute top-0 px-3 py-0.5 rounded-b-md text-[11px] font-semibold ${\n-                      vehicleType === type\n-                        ? \"bg-[#E2A701] text-white\"\n-                        : \"bg-[#FFF8E6] text-black\"\n-                    }`}\n-                  >\n-                    {type === \"car\" ? \"Car\" : \"Bike\"}\n-                  </span>\n-                  <img\n-                    src={\n-                      type === \"car\"\n-                        ? vehicleType === \"car\"\n-                          ? carColor\n-                          : carOutline\n-                        : vehicleType === \"bike\"\n-                        ? bikeColor\n-                        : bikeOutline\n-                    }\n-                    alt={type}\n-                    className=\"h-7 mt-8\"\n-                  />\n-                </button>\n-              ))}\n-            </div>\n-\n-            {/* Form inputs */}\n-            {[\"vehicleNumber\", \"year\", \"fuelType\", \"brand\", \"model\"].map(\n-              (field) => (\n-                <div key={field}>\n-                  <label className=\"block text-slate-700 mb-1 capitalize\">\n-                    {field === \"vehicleNumber\"\n-                      ? \"Vehicle Number\"\n-                      : field === \"fuelType\"\n-                      ? \"Fuel Type\"\n-                      : field}\n-                  </label>\n-                  <input\n-                    name={field}\n-                    value={form[field]}\n-                    onChange={handleChange}\n-                    onBlur={handleBlur}\n-                    className={`w-full border rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#D9E7FE] outline-none ${\n-                      errors[field] && touched[field]\n-                        ? \"border-red-500 bg-red-50\"\n-                        : \"border-slate-300\"\n-                    }`}\n-                    placeholder={`Enter ${field}`}\n-                  />\n-                  {errors[field] && touched[field] && (\n-                    <p className=\"text-red-600 text-xs mt-1\">\n-                      {errors[field]}\n-                    </p>\n-                  )}\n-                </div>\n-              )\n-            )}\n-\n-            {submitError && (\n-              <p className=\"text-red-600 text-xs text-center bg-red-50 py-2 rounded-lg\">\n-                {submitError}\n-              </p>\n-            )}\n-\n-            <div className=\"flex gap-2 pt-2\">\n-              <button\n-                type=\"button\"\n-                onClick={onClose}\n-                disabled={loading}\n-                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-50\"\n-              >\n-                Cancel\n-              </button>\n-              <button\n-                type=\"submit\"\n-                disabled={loading}\n-                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-60\"\n-              >\n-                {loading ? \"Updating...\" : \"Update Vehicle\"}\n-              </button>\n-            </div>\n-          </form>\n-        </div>\n-      </div>\n-    </>\n-  );\n-};\n-\n-export default EditVehicleModal;\n+import React, { useEffect, useState } from \"react\";\r\n+import carColor from \"../assets/CarFill.svg\";\r\n+import carOutline from \"../assets/CarFade.svg\";\r\n+import bikeColor from \"../assets/BikeFill.svg\";\r\n+import bikeOutline from \"../assets/BikeFade.svg\";\r\n+import { updateUserVehicle } from \"../api/vehicleApi\";\r\n+\r\n+const Backdrop = ({ onClose }) => (\r\n+  <div\r\n+    className=\"fixed inset-0 bg-black/40 z-[9998]\"\r\n+    onClick={onClose}\r\n+    aria-hidden=\"true\"\r\n+  />\r\n+);\r\n+\r\n+const EditVehicleModal = ({ open, onClose, onSubmit, initial }) => {\r\n+  const [vehicleType, setVehicleType] = useState(\"car\");\r\n+  const [form, setForm] = useState({\r\n+    vehicleNumber: \"\",\r\n+    brand: \"\",\r\n+    model: \"\",\r\n+    year: \"\",\r\n+    fuelType: \"\",\r\n+  });\r\n+  const [errors, setErrors] = useState({});\r\n+  const [touched, setTouched] = useState({});\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [submitError, setSubmitError] = useState(\"\");\r\n+\r\n+  useEffect(() => {\r\n+    if (!open) return;\r\n+    document.body.style.overflow = \"hidden\";\r\n+    const onKey = (e) => e.key === \"Escape\" && onClose();\r\n+    window.addEventListener(\"keydown\", onKey);\r\n+    return () => {\r\n+      document.body.style.overflow = \"auto\";\r\n+      window.removeEventListener(\"keydown\", onKey);\r\n+    };\r\n+  }, [open, onClose]);\r\n+\r\n+  useEffect(() => {\r\n+    if (initial) {\r\n+      setVehicleType(initial.vehicleType || \"car\");\r\n+      setForm({\r\n+        vehicleNumber: initial.vehicleNumber || \"\",\r\n+        brand: initial.brand || \"\",\r\n+        model: initial.model || \"\",\r\n+        year: initial.year || \"\",\r\n+        fuelType: initial.fuelType || \"\",\r\n+      });\r\n+      setErrors({});\r\n+      setTouched({});\r\n+    }\r\n+  }, [initial]);\r\n+\r\n+  const validateField = (name, value) => {\r\n+    switch (name) {\r\n+      case \"vehicleNumber\": {\r\n+        const clean = value.replace(/\\s/g, \"\").toUpperCase();\r\n+        if (!clean) return \"Vehicle number is required\";\r\n+        const regex = /^[A-Z]{2}[0-9]{1,2}[A-Z]{0,4}[0-9]{3,4}$/;\r\n+        if (!regex.test(clean))\r\n+          return \"Please enter a valid number (e.g., DL01AB1234)\";\r\n+        if (clean.length < 8 || clean.length > 12)\r\n+          return \"Vehicle number should be 8–12 characters\";\r\n+        return \"\";\r\n+      }\r\n+      case \"brand\":\r\n+        if (!value.trim()) return \"Brand is required\";\r\n+        if (value.length < 2) return \"Brand must be at least 2 characters\";\r\n+        return \"\";\r\n+      case \"model\":\r\n+        if (!value.trim()) return \"Model is required\";\r\n+        return \"\";\r\n+      case \"year\": {\r\n+        if (!value.trim()) return \"Year is required\";\r\n+        const yearNum = +value;\r\n+        const curr = new Date().getFullYear();\r\n+        if (yearNum < 1900 || yearNum > curr + 1)\r\n+          return `Year must be between 1900 and ${curr + 1}`;\r\n+        return \"\";\r\n+      }\r\n+      case \"fuelType\": {\r\n+        if (!value.trim()) return \"Fuel type is required\";\r\n+        const valid = [\"petrol\", \"diesel\", \"electric\", \"cng\", \"hybrid\", \"lpg\"];\r\n+        if (!valid.includes(value.toLowerCase()))\r\n+          return \"Invalid fuel type (try Petrol, Diesel, Electric, etc.)\";\r\n+        return \"\";\r\n+      }\r\n+      default:\r\n+        return \"\";\r\n+    }\r\n+  };\r\n+\r\n+  const validateForm = () => {\r\n+    const newErrors = {};\r\n+    for (const key of Object.keys(form)) {\r\n+      newErrors[key] = validateField(key, form[key]);\r\n+    }\r\n+    setErrors(newErrors);\r\n+    return !Object.values(newErrors).some((err) => err);\r\n+  };\r\n+\r\n+  const handleChange = (e) => {\r\n+    const { name, value } = e.target;\r\n+    const newValue = name === \"vehicleNumber\" ? value.toUpperCase() : value;\r\n+    setForm((prev) => ({ ...prev, [name]: newValue }));\r\n+    if (touched[name]) {\r\n+      setErrors((prev) => ({\r\n+        ...prev,\r\n+        [name]: validateField(name, newValue),\r\n+      }));\r\n+    }\r\n+  };\r\n+\r\n+  const handleBlur = (e) => {\r\n+    const { name, value } = e.target;\r\n+    setTouched((prev) => ({ ...prev, [name]: true }));\r\n+    setErrors((prev) => ({\r\n+      ...prev,\r\n+      [name]: validateField(name, value),\r\n+    }));\r\n+  };\r\n+\r\n+  const handleSubmit = async (e) => {\r\n+    e.preventDefault();\r\n+    setSubmitError(\"\");\r\n+\r\n+    const allTouched = Object.keys(form).reduce(\r\n+      (acc, key) => ({ ...acc, [key]: true }),\r\n+      {}\r\n+    );\r\n+    setTouched(allTouched);\r\n+\r\n+    if (!validateForm()) {\r\n+      setSubmitError(\"Vehicle Data is invalid\");\r\n+      return;\r\n+    }\r\n+\r\n+    setLoading(true);\r\n+\r\n+    const payload = {\r\n+      vehicleNumber: form.vehicleNumber.replace(/\\s/g, \"\"),\r\n+      vehicleType,\r\n+      brandName: form.brand.trim(),\r\n+      modelName: form.model.trim(),\r\n+      fuelType: form.fuelType.trim().toUpperCase(),\r\n+      year: form.year,\r\n+    };\r\n+\r\n+    try {\r\n+      const res = await updateUserVehicle(initial._id, payload);\r\n+      if (res?.data?.success || res?.success) {\r\n+        alert(\"Vehicle updated successfully!\");\r\n+        onSubmit?.();\r\n+        onClose();\r\n+      } else {\r\n+        setSubmitError(res?.data?.message || \"Failed to update vehicle\");\r\n+      }\r\n+    } catch (err) {\r\n+      setSubmitError(\"An error occurred while updating the vehicle\");\r\n+    }\r\n+    setLoading(false);\r\n+  };\r\n+\r\n+  if (!open) return null;\r\n+\r\n+  return (\r\n+    <>\r\n+      <Backdrop onClose={onClose} />\r\n+      {/* modal container */}\r\n+      <div className=\"fixed inset-0 z-[9999] grid place-items-center p-3 sm:p-4\">\r\n+        <div className=\"w-full max-w-3xl rounded-2xl bg-white shadow-2xl border border-slate-200\">\r\n+          {/* header */}\r\n+          <div className=\"flex justify-between items-center bg-[#D9E7FE] rounded-t-2xl px-4 sm:px-6 py-3 sm:py-4 border-b\">\r\n+            <h2 className=\"font-semibold text-center flex-1 text-sm sm:text-base\">\r\n+              Edit Vehicle Details\r\n+            </h2>\r\n+            <button onClick={onClose} className=\"text-slate-600 text-lg\">\r\n+              ✕\r\n+            </button>\r\n+          </div>\r\n+\r\n+          {/* body */}\r\n+          <form onSubmit={handleSubmit} className=\"p-4 sm:p-6 space-y-3 text-sm\">\r\n+            {/* Vehicle type toggle */}\r\n+            <div className=\"flex justify-center gap-4\">\r\n+              {[\"car\", \"bike\"].map((type) => (\r\n+                <button\r\n+                  key={type}\r\n+                  type=\"button\"\r\n+                  onClick={() => setVehicleType(type)}\r\n+                  className={`relative flex flex-col items-center w-24 h-14 rounded-xl ${\r\n+                    vehicleType === type\r\n+                      ? \"border-[#266DDF] bg-[#ECF3FD]\"\r\n+                      : \"border border-transparent hover:bg-[#ECF3FD]\"\r\n+                  }`}\r\n+                >\r\n+                  <span\r\n+                    className={`absolute top-0 px-3 py-0.5 rounded-b-md text-[11px] font-semibold ${\r\n+                      vehicleType === type\r\n+                        ? \"bg-[#E2A701] text-white\"\r\n+                        : \"bg-[#FFF8E6] text-black\"\r\n+                    }`}\r\n+                  >\r\n+                    {type === \"car\" ? \"Car\" : \"Bike\"}\r\n+                  </span>\r\n+                  <img\r\n+                    src={\r\n+                      type === \"car\"\r\n+                        ? vehicleType === \"car\"\r\n+                          ? carColor\r\n+                          : carOutline\r\n+                        : vehicleType === \"bike\"\r\n+                        ? bikeColor\r\n+                        : bikeOutline\r\n+                    }\r\n+                    alt={type}\r\n+                    className=\"h- mt-8\"\r\n+                  />\r\n+                </button>\r\n+              ))}\r\n+            </div>\r\n+\r\n+            {/* Form inputs */}\r\n+            {[\"vehicleNumber\", \"year\", \"fuelType\", \"brand\", \"model\"].map(\r\n+              (field) => (\r\n+                <div key={field}>\r\n+                  <label className=\"block text-slate-700 mb-1 capitalize\">\r\n+                    {field === \"vehicleNumber\"\r\n+                      ? \"Vehicle Number\"\r\n+                      : field === \"fuelType\"\r\n+                      ? \"Fuel Type\"\r\n+                      : field}\r\n+                  </label>\r\n+                  <input\r\n+                    name={field}\r\n+                    value={form[field]}\r\n+                    onChange={handleChange}\r\n+                    onBlur={handleBlur}\r\n+                    className={`w-full border rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#D9E7FE] outline-none ${\r\n+                      errors[field] && touched[field]\r\n+                        ? \"border-red-500 bg-red-50\"\r\n+                        : \"border-slate-300\"\r\n+                    }`}\r\n+                    placeholder={`Enter ${field}`}\r\n+                  />\r\n+                  {errors[field] && touched[field] && (\r\n+                    <p className=\"text-red-600 text-xs mt-1\">\r\n+                      {errors[field]}\r\n+                    </p>\r\n+                  )}\r\n+                </div>\r\n+              )\r\n+            )}\r\n+\r\n+            {submitError && (\r\n+              <p className=\"text-red-600 text-xs text-center bg-red-50 py-2 rounded-lg\">\r\n+                {submitError}\r\n+              </p>\r\n+            )}\r\n+\r\n+            <div className=\"flex gap-2 pt-2\">\r\n+              <button\r\n+                type=\"button\"\r\n+                onClick={onClose}\r\n+                disabled={loading}\r\n+                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-50\"\r\n+              >\r\n+                Cancel\r\n+              </button>\r\n+              <button\r\n+                type=\"submit\"\r\n+                disabled={loading}\r\n+                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-60\"\r\n+              >\r\n+                {loading ? \"Updating...\" : \"Update Vehicle\"}\r\n+              </button>\r\n+            </div>\r\n+          </form>\r\n+        </div>\r\n+      </div>\r\n+    </>\r\n+  );\r\n+};\r\n+\r\n+export default EditVehicleModal;\r\n"
                },
                {
                    "date": 1763045279998,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -215,9 +215,9 @@\n                         ? bikeColor\r\n                         : bikeOutline\r\n                     }\r\n                     alt={type}\r\n-                    className=\"h- mt-8\"\r\n+                    className=\"h-9 mt-8\"\r\n                   />\r\n                 </button>\r\n               ))}\r\n             </div>\r\n"
                },
                {
                    "date": 1763045300383,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -215,9 +215,9 @@\n                         ? bikeColor\r\n                         : bikeOutline\r\n                     }\r\n                     alt={type}\r\n-                    className=\"h-9 mt-8\"\r\n+                    className=\"h-8 mt-8\"\r\n                   />\r\n                 </button>\r\n               ))}\r\n             </div>\r\n"
                },
                {
                    "date": 1763045330139,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,9 +189,9 @@\n                 <button\r\n                   key={type}\r\n                   type=\"button\"\r\n                   onClick={() => setVehicleType(type)}\r\n-                  className={`relative flex flex-col items-center w-24 h-14 rounded-xl ${\r\n+                  className={`relative flex flex-col items-center w-2 h-14 rounded-xl ${\r\n                     vehicleType === type\r\n                       ? \"border-[#266DDF] bg-[#ECF3FD]\"\r\n                       : \"border border-transparent hover:bg-[#ECF3FD]\"\r\n                   }`}\r\n"
                },
                {
                    "date": 1763045341510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,287 @@\n+import React, { useEffect, useState } from \"react\";\r\n+import carColor from \"../assets/CarFill.svg\";\r\n+import carOutline from \"../assets/CarFade.svg\";\r\n+import bikeColor from \"../assets/BikeFill.svg\";\r\n+import bikeOutline from \"../assets/BikeFade.svg\";\r\n+import { updateUserVehicle } from \"../api/vehicleApi\";\r\n+\r\n+const Backdrop = ({ onClose }) => (\r\n+  <div\r\n+    className=\"fixed inset-0 bg-black/40 z-[9998]\"\r\n+    onClick={onClose}\r\n+    aria-hidden=\"true\"\r\n+  />\r\n+);\r\n+\r\n+const EditVehicleModal = ({ open, onClose, onSubmit, initial }) => {\r\n+  const [vehicleType, setVehicleType] = useState(\"car\");\r\n+  const [form, setForm] = useState({\r\n+    vehicleNumber: \"\",\r\n+    brand: \"\",\r\n+    model: \"\",\r\n+    year: \"\",\r\n+    fuelType: \"\",\r\n+  });\r\n+  const [errors, setErrors] = useState({});\r\n+  const [touched, setTouched] = useState({});\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [submitError, setSubmitError] = useState(\"\");\r\n+\r\n+  useEffect(() => {\r\n+    if (!open) return;\r\n+    document.body.style.overflow = \"hidden\";\r\n+    const onKey = (e) => e.key === \"Escape\" && onClose();\r\n+    window.addEventListener(\"keydown\", onKey);\r\n+    return () => {\r\n+      document.body.style.overflow = \"auto\";\r\n+      window.removeEventListener(\"keydown\", onKey);\r\n+    };\r\n+  }, [open, onClose]);\r\n+\r\n+  useEffect(() => {\r\n+    if (initial) {\r\n+      setVehicleType(initial.vehicleType || \"car\");\r\n+      setForm({\r\n+        vehicleNumber: initial.vehicleNumber || \"\",\r\n+        brand: initial.brand || \"\",\r\n+        model: initial.model || \"\",\r\n+        year: initial.year || \"\",\r\n+        fuelType: initial.fuelType || \"\",\r\n+      });\r\n+      setErrors({});\r\n+      setTouched({});\r\n+    }\r\n+  }, [initial]);\r\n+\r\n+  const validateField = (name, value) => {\r\n+    switch (name) {\r\n+      case \"vehicleNumber\": {\r\n+        const clean = value.replace(/\\s/g, \"\").toUpperCase();\r\n+        if (!clean) return \"Vehicle number is required\";\r\n+        const regex = /^[A-Z]{2}[0-9]{1,2}[A-Z]{0,4}[0-9]{3,4}$/;\r\n+        if (!regex.test(clean))\r\n+          return \"Please enter a valid number (e.g., DL01AB1234)\";\r\n+        if (clean.length < 8 || clean.length > 12)\r\n+          return \"Vehicle number should be 8–12 characters\";\r\n+        return \"\";\r\n+      }\r\n+      case \"brand\":\r\n+        if (!value.trim()) return \"Brand is required\";\r\n+        if (value.length < 2) return \"Brand must be at least 2 characters\";\r\n+        return \"\";\r\n+      case \"model\":\r\n+        if (!value.trim()) return \"Model is required\";\r\n+        return \"\";\r\n+      case \"year\": {\r\n+        if (!value.trim()) return \"Year is required\";\r\n+        const yearNum = +value;\r\n+        const curr = new Date().getFullYear();\r\n+        if (yearNum < 1900 || yearNum > curr + 1)\r\n+          return `Year must be between 1900 and ${curr + 1}`;\r\n+        return \"\";\r\n+      }\r\n+      case \"fuelType\": {\r\n+        if (!value.trim()) return \"Fuel type is required\";\r\n+        const valid = [\"petrol\", \"diesel\", \"electric\", \"cng\", \"hybrid\", \"lpg\"];\r\n+        if (!valid.includes(value.toLowerCase()))\r\n+          return \"Invalid fuel type (try Petrol, Diesel, Electric, etc.)\";\r\n+        return \"\";\r\n+      }\r\n+      default:\r\n+        return \"\";\r\n+    }\r\n+  };\r\n+\r\n+  const validateForm = () => {\r\n+    const newErrors = {};\r\n+    for (const key of Object.keys(form)) {\r\n+      newErrors[key] = validateField(key, form[key]);\r\n+    }\r\n+    setErrors(newErrors);\r\n+    return !Object.values(newErrors).some((err) => err);\r\n+  };\r\n+\r\n+  const handleChange = (e) => {\r\n+    const { name, value } = e.target;\r\n+    const newValue = name === \"vehicleNumber\" ? value.toUpperCase() : value;\r\n+    setForm((prev) => ({ ...prev, [name]: newValue }));\r\n+    if (touched[name]) {\r\n+      setErrors((prev) => ({\r\n+        ...prev,\r\n+        [name]: validateField(name, newValue),\r\n+      }));\r\n+    }\r\n+  };\r\n+\r\n+  const handleBlur = (e) => {\r\n+    const { name, value } = e.target;\r\n+    setTouched((prev) => ({ ...prev, [name]: true }));\r\n+    setErrors((prev) => ({\r\n+      ...prev,\r\n+      [name]: validateField(name, value),\r\n+    }));\r\n+  };\r\n+\r\n+  const handleSubmit = async (e) => {\r\n+    e.preventDefault();\r\n+    setSubmitError(\"\");\r\n+\r\n+    const allTouched = Object.keys(form).reduce(\r\n+      (acc, key) => ({ ...acc, [key]: true }),\r\n+      {}\r\n+    );\r\n+    setTouched(allTouched);\r\n+\r\n+    if (!validateForm()) {\r\n+      setSubmitError(\"Vehicle Data is invalid\");\r\n+      return;\r\n+    }\r\n+\r\n+    setLoading(true);\r\n+\r\n+    const payload = {\r\n+      vehicleNumber: form.vehicleNumber.replace(/\\s/g, \"\"),\r\n+      vehicleType,\r\n+      brandName: form.brand.trim(),\r\n+      modelName: form.model.trim(),\r\n+      fuelType: form.fuelType.trim().toUpperCase(),\r\n+      year: form.year,\r\n+    };\r\n+\r\n+    try {\r\n+      const res = await updateUserVehicle(initial._id, payload);\r\n+      if (res?.data?.success || res?.success) {\r\n+        alert(\"Vehicle updated successfully!\");\r\n+        onSubmit?.();\r\n+        onClose();\r\n+      } else {\r\n+        setSubmitError(res?.data?.message || \"Failed to update vehicle\");\r\n+      }\r\n+    } catch (err) {\r\n+      setSubmitError(\"An error occurred while updating the vehicle\");\r\n+    }\r\n+    setLoading(false);\r\n+  };\r\n+\r\n+  if (!open) return null;\r\n+\r\n+  return (\r\n+    <>\r\n+      <Backdrop onClose={onClose} />\r\n+      {/* modal container */}\r\n+      <div className=\"fixed inset-0 z-[9999] grid place-items-center p-3 sm:p-4\">\r\n+        <div className=\"w-full max-w-3xl rounded-2xl bg-white shadow-2xl border border-slate-200\">\r\n+          {/* header */}\r\n+          <div className=\"flex justify-between items-center bg-[#D9E7FE] rounded-t-2xl px-4 sm:px-6 py-3 sm:py-4 border-b\">\r\n+            <h2 className=\"font-semibold text-center flex-1 text-sm sm:text-base\">\r\n+              Edit Vehicle Details\r\n+            </h2>\r\n+            <button onClick={onClose} className=\"text-slate-600 text-lg\">\r\n+              ✕\r\n+            </button>\r\n+          </div>\r\n+\r\n+          {/* body */}\r\n+          <form onSubmit={handleSubmit} className=\"p-4 sm:p-6 space-y-3 text-sm\">\r\n+            {/* Vehicle type toggle */}\r\n+            <div className=\"flex justify-center gap-4\">\r\n+              {[\"car\", \"bike\"].map((type) => (\r\n+                <button\r\n+                  key={type}\r\n+                  type=\"button\"\r\n+                  onClick={() => setVehicleType(type)}\r\n+                  className={`relative flex flex-col items-center w-28 h- rounded-xl ${\r\n+                    vehicleType === type\r\n+                      ? \"border-[#266DDF] bg-[#ECF3FD]\"\r\n+                      : \"border border-transparent hover:bg-[#ECF3FD]\"\r\n+                  }`}\r\n+                >\r\n+                  <span\r\n+                    className={`absolute top-0 px-3 py-0.5 rounded-b-md text-[11px] font-semibold ${\r\n+                      vehicleType === type\r\n+                        ? \"bg-[#E2A701] text-white\"\r\n+                        : \"bg-[#FFF8E6] text-black\"\r\n+                    }`}\r\n+                  >\r\n+                    {type === \"car\" ? \"Car\" : \"Bike\"}\r\n+                  </span>\r\n+                  <img\r\n+                    src={\r\n+                      type === \"car\"\r\n+                        ? vehicleType === \"car\"\r\n+                          ? carColor\r\n+                          : carOutline\r\n+                        : vehicleType === \"bike\"\r\n+                        ? bikeColor\r\n+                        : bikeOutline\r\n+                    }\r\n+                    alt={type}\r\n+                    className=\"h-8 mt-8\"\r\n+                  />\r\n+                </button>\r\n+              ))}\r\n+            </div>\r\n+\r\n+            {/* Form inputs */}\r\n+            {[\"vehicleNumber\", \"year\", \"fuelType\", \"brand\", \"model\"].map(\r\n+              (field) => (\r\n+                <div key={field}>\r\n+                  <label className=\"block text-slate-700 mb-1 capitalize\">\r\n+                    {field === \"vehicleNumber\"\r\n+                      ? \"Vehicle Number\"\r\n+                      : field === \"fuelType\"\r\n+                      ? \"Fuel Type\"\r\n+                      : field}\r\n+                  </label>\r\n+                  <input\r\n+                    name={field}\r\n+                    value={form[field]}\r\n+                    onChange={handleChange}\r\n+                    onBlur={handleBlur}\r\n+                    className={`w-full border rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#D9E7FE] outline-none ${\r\n+                      errors[field] && touched[field]\r\n+                        ? \"border-red-500 bg-red-50\"\r\n+                        : \"border-slate-300\"\r\n+                    }`}\r\n+                    placeholder={`Enter ${field}`}\r\n+                  />\r\n+                  {errors[field] && touched[field] && (\r\n+                    <p className=\"text-red-600 text-xs mt-1\">\r\n+                      {errors[field]}\r\n+                    </p>\r\n+                  )}\r\n+                </div>\r\n+              )\r\n+            )}\r\n+\r\n+            {submitError && (\r\n+              <p className=\"text-red-600 text-xs text-center bg-red-50 py-2 rounded-lg\">\r\n+                {submitError}\r\n+              </p>\r\n+            )}\r\n+\r\n+            <div className=\"flex gap-2 pt-2\">\r\n+              <button\r\n+                type=\"button\"\r\n+                onClick={onClose}\r\n+                disabled={loading}\r\n+                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-50\"\r\n+              >\r\n+                Cancel\r\n+              </button>\r\n+              <button\r\n+                type=\"submit\"\r\n+                disabled={loading}\r\n+                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-60\"\r\n+              >\r\n+                {loading ? \"Updating...\" : \"Update Vehicle\"}\r\n+              </button>\r\n+            </div>\r\n+          </form>\r\n+        </div>\r\n+      </div>\r\n+    </>\r\n+  );\r\n+};\r\n+\r\n+export default EditVehicleModal;\r\n"
                },
                {
                    "date": 1763045516635,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,287 @@\n+import React, { useEffect, useState } from \"react\";\r\n+import carColor from \"../assets/CarFill.svg\";\r\n+import carOutline from \"../assets/CarFade.svg\";\r\n+import bikeColor from \"../assets/BikeFill.svg\";\r\n+import bikeOutline from \"../assets/BikeFade.svg\";\r\n+import { updateUserVehicle } from \"../api/vehicleApi\";\r\n+\r\n+const Backdrop = ({ onClose }) => (\r\n+  <div\r\n+    className=\"fixed inset-0 bg-black/40 z-[9998]\"\r\n+    onClick={onClose}\r\n+    aria-hidden=\"true\"\r\n+  />\r\n+);\r\n+\r\n+const EditVehicleModal = ({ open, onClose, onSubmit, initial }) => {\r\n+  const [vehicleType, setVehicleType] = useState(\"car\");\r\n+  const [form, setForm] = useState({\r\n+    vehicleNumber: \"\",\r\n+    brand: \"\",\r\n+    model: \"\",\r\n+    year: \"\",\r\n+    fuelType: \"\",\r\n+  });\r\n+  const [errors, setErrors] = useState({});\r\n+  const [touched, setTouched] = useState({});\r\n+  const [loading, setLoading] = useState(false);\r\n+  const [submitError, setSubmitError] = useState(\"\");\r\n+\r\n+  useEffect(() => {\r\n+    if (!open) return;\r\n+    document.body.style.overflow = \"hidden\";\r\n+    const onKey = (e) => e.key === \"Escape\" && onClose();\r\n+    window.addEventListener(\"keydown\", onKey);\r\n+    return () => {\r\n+      document.body.style.overflow = \"auto\";\r\n+      window.removeEventListener(\"keydown\", onKey);\r\n+    };\r\n+  }, [open, onClose]);\r\n+\r\n+  useEffect(() => {\r\n+    if (initial) {\r\n+      setVehicleType(initial.vehicleType || \"car\");\r\n+      setForm({\r\n+        vehicleNumber: initial.vehicleNumber || \"\",\r\n+        brand: initial.brand || \"\",\r\n+        model: initial.model || \"\",\r\n+        year: initial.year || \"\",\r\n+        fuelType: initial.fuelType || \"\",\r\n+      });\r\n+      setErrors({});\r\n+      setTouched({});\r\n+    }\r\n+  }, [initial]);\r\n+\r\n+  const validateField = (name, value) => {\r\n+    switch (name) {\r\n+      case \"vehicleNumber\": {\r\n+        const clean = value.replace(/\\s/g, \"\").toUpperCase();\r\n+        if (!clean) return \"Vehicle number is required\";\r\n+        const regex = /^[A-Z]{2}[0-9]{1,2}[A-Z]{0,4}[0-9]{3,4}$/;\r\n+        if (!regex.test(clean))\r\n+          return \"Please enter a valid number (e.g., DL01AB1234)\";\r\n+        if (clean.length < 8 || clean.length > 12)\r\n+          return \"Vehicle number should be 8–12 characters\";\r\n+        return \"\";\r\n+      }\r\n+      case \"brand\":\r\n+        if (!value.trim()) return \"Brand is required\";\r\n+        if (value.length < 2) return \"Brand must be at least 2 characters\";\r\n+        return \"\";\r\n+      case \"model\":\r\n+        if (!value.trim()) return \"Model is required\";\r\n+        return \"\";\r\n+      case \"year\": {\r\n+        if (!value.trim()) return \"Year is required\";\r\n+        const yearNum = +value;\r\n+        const curr = new Date().getFullYear();\r\n+        if (yearNum < 1900 || yearNum > curr + 1)\r\n+          return `Year must be between 1900 and ${curr + 1}`;\r\n+        return \"\";\r\n+      }\r\n+      case \"fuelType\": {\r\n+        if (!value.trim()) return \"Fuel type is required\";\r\n+        const valid = [\"petrol\", \"diesel\", \"electric\", \"cng\", \"hybrid\", \"lpg\"];\r\n+        if (!valid.includes(value.toLowerCase()))\r\n+          return \"Invalid fuel type (try Petrol, Diesel, Electric, etc.)\";\r\n+        return \"\";\r\n+      }\r\n+      default:\r\n+        return \"\";\r\n+    }\r\n+  };\r\n+\r\n+  const validateForm = () => {\r\n+    const newErrors = {};\r\n+    for (const key of Object.keys(form)) {\r\n+      newErrors[key] = validateField(key, form[key]);\r\n+    }\r\n+    setErrors(newErrors);\r\n+    return !Object.values(newErrors).some((err) => err);\r\n+  };\r\n+\r\n+  const handleChange = (e) => {\r\n+    const { name, value } = e.target;\r\n+    const newValue = name === \"vehicleNumber\" ? value.toUpperCase() : value;\r\n+    setForm((prev) => ({ ...prev, [name]: newValue }));\r\n+    if (touched[name]) {\r\n+      setErrors((prev) => ({\r\n+        ...prev,\r\n+        [name]: validateField(name, newValue),\r\n+      }));\r\n+    }\r\n+  };\r\n+\r\n+  const handleBlur = (e) => {\r\n+    const { name, value } = e.target;\r\n+    setTouched((prev) => ({ ...prev, [name]: true }));\r\n+    setErrors((prev) => ({\r\n+      ...prev,\r\n+      [name]: validateField(name, value),\r\n+    }));\r\n+  };\r\n+\r\n+  const handleSubmit = async (e) => {\r\n+    e.preventDefault();\r\n+    setSubmitError(\"\");\r\n+\r\n+    const allTouched = Object.keys(form).reduce(\r\n+      (acc, key) => ({ ...acc, [key]: true }),\r\n+      {}\r\n+    );\r\n+    setTouched(allTouched);\r\n+\r\n+    if (!validateForm()) {\r\n+      setSubmitError(\"Vehicle Data is invalid\");\r\n+      return;\r\n+    }\r\n+\r\n+    setLoading(true);\r\n+\r\n+    const payload = {\r\n+      vehicleNumber: form.vehicleNumber.replace(/\\s/g, \"\"),\r\n+      vehicleType,\r\n+      brandName: form.brand.trim(),\r\n+      modelName: form.model.trim(),\r\n+      fuelType: form.fuelType.trim().toUpperCase(),\r\n+      year: form.year,\r\n+    };\r\n+\r\n+    try {\r\n+      const res = await updateUserVehicle(initial._id, payload);\r\n+      if (res?.data?.success || res?.success) {\r\n+        alert(\"Vehicle updated successfully!\");\r\n+        onSubmit?.();\r\n+        onClose();\r\n+      } else {\r\n+        setSubmitError(res?.data?.message || \"Failed to update vehicle\");\r\n+      }\r\n+    } catch (err) {\r\n+      setSubmitError(\"An error occurred while updating the vehicle\");\r\n+    }\r\n+    setLoading(false);\r\n+  };\r\n+\r\n+  if (!open) return null;\r\n+\r\n+  return (\r\n+    <>\r\n+      <Backdrop onClose={onClose} />\r\n+      {/* modal container */}\r\n+      <div className=\"fixed inset-0 z-[9999] grid place-items-center p-3 sm:p-4\">\r\n+        <div className=\"w-full max-w-3xl rounded-2xl bg-white shadow-2xl\">\r\n+          {/* header */}\r\n+          <div className=\"flex justify-between items-center bg-[#D9E7FE] rounded-t-2xl px-4 sm:px-6 py-3 sm:py-4 border-b\">\r\n+            <h2 className=\"font-semibold text-center flex-1 text-sm sm:text-base\">\r\n+              Edit Vehicle Details\r\n+            </h2>\r\n+            <button onClick={onClose} className=\"text-slate-600 text-lg\">\r\n+              ✕\r\n+            </button>\r\n+          </div>\r\n+\r\n+          {/* body */}\r\n+          <form onSubmit={handleSubmit} className=\"p-4 sm:p-6 space-y-3 text-sm\">\r\n+            {/* Vehicle type toggle */}\r\n+            <div className=\"flex justify-center gap-4\">\r\n+              {[\"car\", \"bike\"].map((type) => (\r\n+                <button\r\n+                  key={type}\r\n+                  type=\"button\"\r\n+                  onClick={() => setVehicleType(type)}\r\n+                  className={`relative flex flex-col items-center w-28 h-18 rounded-xl ${\r\n+                    vehicleType === type\r\n+                      ? \"border-[#266DDF] bg-[#ECF3FD]\"\r\n+                      : \"border border-transparent hover:bg-[#ECF3FD]\"\r\n+                  }`}\r\n+                >\r\n+                  <span\r\n+                    className={`absolute top-0 px-3 py-0.5 rounded-b-md text-[11px] font-semibold ${\r\n+                      vehicleType === type\r\n+                        ? \"bg-[#E2A701] text-white\"\r\n+                        : \"bg-[#FFF8E6] text-black\"\r\n+                    }`}\r\n+                  >\r\n+                    {type === \"car\" ? \"Car\" : \"Bike\"}\r\n+                  </span>\r\n+                  <img\r\n+                    src={\r\n+                      type === \"car\"\r\n+                        ? vehicleType === \"car\"\r\n+                          ? carColor\r\n+                          : carOutline\r\n+                        : vehicleType === \"bike\"\r\n+                        ? bikeColor\r\n+                        : bikeOutline\r\n+                    }\r\n+                    alt={type}\r\n+                    className=\"h-8 mt-8\"\r\n+                  />\r\n+                </button>\r\n+              ))}\r\n+            </div>\r\n+\r\n+            {/* Form inputs */}\r\n+            {[\"vehicleNumber\", \"year\", \"fuelType\", \"brand\", \"model\"].map(\r\n+              (field) => (\r\n+                <div key={field}>\r\n+                  <label className=\"block text-slate-700 mb-1 capitalize\">\r\n+                    {field === \"vehicleNumber\"\r\n+                      ? \"Vehicle Number\"\r\n+                      : field === \"fuelType\"\r\n+                      ? \"Fuel Type\"\r\n+                      : field}\r\n+                  </label>\r\n+                  <input\r\n+                    name={field}\r\n+                    value={form[field]}\r\n+                    onChange={handleChange}\r\n+                    onBlur={handleBlur}\r\n+                    className={`w-full border rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#D9E7FE] outline-none ${\r\n+                      errors[field] && touched[field]\r\n+                        ? \"border-red-500 bg-red-50\"\r\n+                        : \"border-slate-300\"\r\n+                    }`}\r\n+                    placeholder={`Enter ${field}`}\r\n+                  />\r\n+                  {errors[field] && touched[field] && (\r\n+                    <p className=\"text-red-600 text-xs mt-1\">\r\n+                      {errors[field]}\r\n+                    </p>\r\n+                  )}\r\n+                </div>\r\n+              )\r\n+            )}\r\n+\r\n+            {submitError && (\r\n+              <p className=\"text-red-600 text-xs text-center bg-red-50 py-2 rounded-lg\">\r\n+                {submitError}\r\n+              </p>\r\n+            )}\r\n+\r\n+            <div className=\"flex gap-2 pt-2\">\r\n+              <button\r\n+                type=\"button\"\r\n+                onClick={onClose}\r\n+                disabled={loading}\r\n+                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-50\"\r\n+              >\r\n+                Cancel\r\n+              </button>\r\n+              <button\r\n+                type=\"submit\"\r\n+                disabled={loading}\r\n+                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-60\"\r\n+              >\r\n+                {loading ? \"Updating...\" : \"Update Vehicle\"}\r\n+              </button>\r\n+            </div>\r\n+          </form>\r\n+        </div>\r\n+      </div>\r\n+    </>\r\n+  );\r\n+};\r\n+\r\n+export default EditVehicleModal;\r\n"
                }
            ],
            "date": 1763039973501,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\nimport carColor from \"../assets/CarFill.svg\";\nimport carOutline from \"../assets/CarFade.svg\";\nimport bikeColor from \"../assets/BikeFill.svg\";\nimport bikeOutline from \"../assets/BikeFade.svg\";\nimport { updateUserVehicle } from \"../api/vehicleApi\";\n\nconst Backdrop = ({ onClose }) => (\n  <div\n    className=\"fixed inset-0 bg-black/40 z-[9998]\"\n    onClick={onClose}\n    aria-hidden=\"true\"\n  />\n);\n\nconst EditVehicleModal = ({ open, onClose, onSubmit, initial }) => {\n  const [vehicleType, setVehicleType] = useState(\"car\");\n  const [form, setForm] = useState({\n    year: \"\",\n    fuelType: \"\",\n  });\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [submitError, setSubmitError] = useState(\"\");\n\n  useEffect(() => {\n    if (!open) return;\n    document.body.style.overflow = \"hidden\";\n    const onKey = (e) => e.key === \"Escape\" && onClose();\n    window.addEventListener(\"keydown\", onKey);\n    return () => {\n      document.body.style.overflow = \"auto\";\n      window.removeEventListener(\"keydown\", onKey);\n    };\n  }, [open, onClose]);\n\n  useEffect(() => {\n    if (initial) {\n      setVehicleType(initial.vehicleType || \"car\");\n      setForm({\n        vehicleNumber: initial.vehicleNumber || \"\",\n        brand: initial.brand || \"\",\n        model: initial.model || \"\",\n        year: initial.year || \"\",\n        fuelType: initial.fuelType || \"\",\n      });\n      setErrors({});\n      setTouched({});\n    }\n  }, [initial]);\n\n  useEffect(() => {\n    if (!open) {\n      setForm({\n        vehicleNumber: \"\",\n        brand: \"\",\n        model: \"\",\n        year: \"\",\n        fuelType: \"\",\n      });\n      setErrors({});\n      setTouched({});\n      setSubmitError(\"\");\n      setVehicleType(\"car\");\n    }\n  }, [open]);\n\n  const validateField = (name, value) => {\n    switch (name) {\n      case \"vehicleNumber\": {\n        const clean = value.replace(/\\s/g, \"\").toUpperCase();\n        if (!clean) return \"Vehicle number is required\";\n        const regex = /^[A-Z]{2}[0-9]{1,2}[A-Z]{0,4}[0-9]{3,4}$/;\n        if (!regex.test(clean))\n          return \"Please enter a valid number (e.g., DL01AB1234)\";\n        if (clean.length < 8 || clean.length > 12)\n          return \"Vehicle number should be 8–12 characters\";\n        return \"\";\n      }\n      case \"brand\":\n        if (!value.trim()) return \"Brand is required\";\n        if (value.length < 2) return \"Brand must be at least 2 characters\";\n        return \"\";\n      case \"model\":\n        if (!value.trim()) return \"Model is required\";\n        return \"\";\n      case \"year\": {\n        if (!value.trim()) return \"Year is required\";\n        const yearNum = +value;\n        const curr = new Date().getFullYear();\n        if (yearNum < 1900 || yearNum > curr + 1)\n          return `Year must be between 1900 and ${curr + 1}`;\n        return \"\";\n      }\n      case \"fuelType\": {\n        if (!value.trim()) return \"Fuel type is required\";\n        const valid = [\"petrol\", \"diesel\", \"electric\", \"cng\", \"hybrid\", \"lpg\"];\n        if (!valid.includes(value.toLowerCase()))\n          return \"Invalid fuel type (try Petrol, Diesel, Electric, etc.)\";\n        return \"\";\n      }\n      default:\n        return \"\";\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    for (const key of Object.keys(form)) {\n      newErrors[key] = validateField(key, form[key]);\n    }\n    setErrors(newErrors);\n    return !Object.values(newErrors).some((err) => err);\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    const newValue = name === \"vehicleNumber\" ? value.toUpperCase() : value;\n    setForm((prev) => ({ ...prev, [name]: newValue }));\n    if (touched[name]) {\n      setErrors((prev) => ({\n        ...prev,\n        [name]: validateField(name, newValue),\n      }));\n    }\n  };\n\n  const handleBlur = (e) => {\n    const { name, value } = e.target;\n    setTouched((prev) => ({ ...prev, [name]: true }));\n    setErrors((prev) => ({\n      ...prev,\n      [name]: validateField(name, value),\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setSubmitError(\"\");\n\n    const allTouched = Object.keys(form).reduce(\n      (acc, key) => ({ ...acc, [key]: true }),\n      {}\n    );\n    setTouched(allTouched);\n\n    if (!validateForm()) {\n      setSubmitError(\"Vehicle Data is invalid\");\n      return;\n    }\n\n    setLoading(true);\n\n    const payload = {\n      vehicleNumber: form.vehicleNumber.replace(/\\s/g, \"\"),\n      vehicleType,\n      brandName: form.brand.trim(),\n      modelName: form.model.trim(),\n      fuelType: form.fuelType.trim().toUpperCase(),\n      year: form.year,\n    };\n\n    try {\n      const res = await updateUserVehicle(initial._id, payload);\n      if (res?.data?.success || res?.success) {\n        alert(\"Vehicle updated successfully!\");\n        onSubmit?.();\n        onClose();\n      } else {\n        setSubmitError(res?.data?.message || \"Failed to update vehicle\");\n      }\n    } catch (err) {\n      setSubmitError(\"An error occurred while updating the vehicle\");\n    }\n    setLoading(false);\n  };\n\n  if (!open) return null;\n\n  return (\n    <>\n      <Backdrop onClose={onClose} />\n      {/* modal container */}\n      <div className=\"fixed inset-0 z-[9999] grid place-items-center p-3 sm:p-4\">\n        <div className=\"w-full max-w-3xl rounded-2xl bg-white shadow-2xl border border-slate-200\">\n          {/* header */}\n          <div className=\"flex justify-between items-center bg-[#D9E7FE] rounded-t-2xl px-4 sm:px-6 py-3 sm:py-4 border-b\">\n            <h2 className=\"font-semibold text-center flex-1 text-sm sm:text-base\">\n              Edit Vehicle Details\n            </h2>\n            <button onClick={onClose} className=\"text-slate-600 text-lg\">\n              ✕\n            </button>\n          </div>\n\n          {/* body */}\n          <form onSubmit={handleSubmit} className=\"p-4 sm:p-6 space-y-3 text-sm\">\n            {/* Vehicle type toggle */}\n            <div className=\"flex justify-center gap-4\">\n              {[\"car\", \"bike\"].map((type) => (\n                <button\n                  key={type}\n                  type=\"button\"\n                  onClick={() => setVehicleType(type)}\n                  className={`relative flex flex-col items-center w-24 h-14 rounded-xl ${\n                    vehicleType === type\n                      ? \"border-[#266DDF] bg-[#ECF3FD]\"\n                      : \"border border-transparent hover:bg-[#ECF3FD]\"\n                  }`}\n                >\n                  <span\n                    className={`absolute top-0 px-3 py-0.5 rounded-b-md text-[11px] font-semibold ${\n                      vehicleType === type\n                        ? \"bg-[#E2A701] text-white\"\n                        : \"bg-[#FFF8E6] text-black\"\n                    }`}\n                  >\n                    {type === \"car\" ? \"Car\" : \"Bike\"}\n                  </span>\n                  <img\n                    src={\n                      type === \"car\"\n                        ? vehicleType === \"car\"\n                          ? carColor\n                          : carOutline\n                        : vehicleType === \"bike\"\n                        ? bikeColor\n                        : bikeOutline\n                    }\n                    alt={type}\n                    className=\"h-7 mt-8\"\n                  />\n                </button>\n              ))}\n            </div>\n\n            {/* Form inputs */}\n            {[\"vehicleNumber\", \"year\", \"fuelType\", \"brand\", \"model\"].map(\n              (field) => (\n                <div key={field}>\n                  <label className=\"block text-slate-700 mb-1 capitalize\">\n                    {field === \"vehicleNumber\"\n                      ? \"Vehicle Number\"\n                      : field === \"fuelType\"\n                      ? \"Fuel Type\"\n                      : field}\n                  </label>\n                  <input\n                    name={field}\n                    value={form[field]}\n                    onChange={handleChange}\n                    onBlur={handleBlur}\n                    className={`w-full border rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-[#D9E7FE] outline-none ${\n                      errors[field] && touched[field]\n                        ? \"border-red-500 bg-red-50\"\n                        : \"border-slate-300\"\n                    }`}\n                    placeholder={`Enter ${field}`}\n                  />\n                  {errors[field] && touched[field] && (\n                    <p className=\"text-red-600 text-xs mt-1\">\n                      {errors[field]}\n                    </p>\n                  )}\n                </div>\n              )\n            )}\n\n            {submitError && (\n              <p className=\"text-red-600 text-xs text-center bg-red-50 py-2 rounded-lg\">\n                {submitError}\n              </p>\n            )}\n\n            <div className=\"flex gap-2 pt-2\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                disabled={loading}\n                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-50\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"border-2 border-blue-600 px-6 py-2 rounded-lg text-[#266DDF] hover:bg-blue-700 hover:text-white transition disabled:opacity-60\"\n              >\n                {loading ? \"Updating...\" : \"Update Vehicle\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EditVehicleModal;\n"
        }
    ]
}